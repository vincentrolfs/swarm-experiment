(this.webpackJsonpswarm=this.webpackJsonpswarm||[]).push([[0],{20:function(t,e,i){t.exports=i(37)},25:function(t,e,i){},26:function(t,e,i){},37:function(t,e,i){"use strict";i.r(e);var a=i(0),n=i.n(a),s=i(16),o=i.n(s),r=(i(25),i(26),i(5)),h=i(3),u=i(4),l=function(){function t(e,i){if(Object(h.a)(this,t),void 0===e||void 0===i){this.x=Math.random()-.5,this.y=Math.random()-.5;var a=v*Math.random()/this.magnitude();this.x*=a,this.x+=d.x,this.y*=a,this.y+=d.y}else this.x=e,this.y=i}return Object(u.a)(t,[{key:"add",value:function(e){return new t(this.x+e.x,this.y+e.y)}},{key:"subtract",value:function(e){return new t(this.x-e.x,this.y-e.y)}},{key:"magnitude",value:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}},{key:"distance",value:function(t){return this.subtract(t).magnitude()}},{key:"multiply",value:function(e){return new t(this.x*e,this.y*e)}},{key:"divide",value:function(t){return this.multiply(1/t)}},{key:"moveUniform",value:function(t){t=t.divide(t.magnitude());var e=this.add(t);if(e.distance(d)<=v)return e;var i=c(d,v,this,1),a=Object(r.a)(i,2),n=a[0],s=a[1];return e.distance(n)<=e.distance(s)?n:s}}]),t}(),c=function(t,e,i,a){var n=[t.x,t.y,i.x,i.y],s=n[0],o=n[1],r=n[2],h=n[3],u=s-r,c=o-h,v=Math.sqrt(u*u+c*c);if(!(Math.abs(e-a)<=v&&v<=e+a))return[];var d=v*v,f=d*d,m=(e*e-a*a)/(2*d),p=e*e-a*a,y=Math.sqrt(2*(e*e+a*a)/d-p*p/f-1),g=(s+r)/2+m*(r-s),w=y*(h-o)/2,x=g-w,k=(o+h)/2+m*(h-o),M=y*(s-r)/2,b=k-M;return[new l(g+w,k+M),new l(x,b)]},v=350,d=new l(375,375),f=i(18),m=i(19),p=function(){function t(e){Object(h.a)(this,t),this.canvas=e,this.ctx=e.getContext("2d"),this.behaviours=[],this.positions=[],this.colors=[],this.initBehaviours(),this.initPositions(),this.initColors(),this.movementChangeTimestamps=new Array(this.behaviours.length).fill(0),this.hasMovedLastUpdate=new Array(this.behaviours.length).fill(!1),this.loopTimestamp=1,this.runLoop()}return Object(u.a)(t,[{key:"getSearchParameter",value:function(t){return new URL(window.location.href).searchParams.get(t)}},{key:"initBehaviours",value:function(){var t=parseInt(this.getSearchParameter("amount"));(isNaN(t)||t<=1)&&(t=15);for(var e=this._getPermutation(t),i=0;i<t;i++){var a=e[i];do{a=Math.floor(Math.random()*t)}while(a===i);e[i]=a;var n=this.getRandomBehaviourRule();this.behaviours.push([a,n])}this.logCycles(e)}},{key:"logCycles",value:function(t){console.log("Cycles:");for(var e=0;e<t.length;e++){var i=[],a=e;do{if(-1!==i.indexOf(a)){i.push(a);break}i.push(a),a=t[a]}while(a!==e);console.log(e,i)}}},{key:"_getPermutation",value:function(t){for(var e=Object(f.a)(Array(t).keys()),i=e.length-1;i>0;i--){var a=Math.floor(Math.random()*(i+1)),n=[e[a],e[i]];e[i]=n[0],e[a]=n[1]}return e}},{key:"getRandomBehaviourRule",value:function(){return 4*Math.random()*v-2*v}},{key:"initPositions",value:function(){var t=this;this.behaviours.forEach((function(){return t.positions.push(new l)}))}},{key:"initColors",value:function(){this.colors=Object(m.a)({count:this.positions.length}).map((function(t){return t.hex()}))}},{key:"runLoop",value:function(){var t=this;setInterval((function(){t.draw(),t.updatePositions(),t.loopTimestamp++}),5)}},{key:"draw",value:function(){this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.drawArena();for(var t=0;t<this.positions.length;t++)this.drawAgent(t)}},{key:"drawAgent",value:function(t){var e=this.ctx,i=this.positions[t],a=i.x,n=i.y,s=this.colors[t],o=this.colors[this.behaviours[t][0]],r=1===Math.sign(this.behaviours[t][1]);e.beginPath(),e.arc(a,n,20,0,2*Math.PI,!1),e.fillStyle=s,e.fill(),e.font="15px serif",e.fillText(r?"\u2764\ufe0f":"\ud83d\udd25",a+10,n-10),e.beginPath(),e.arc(a+20/3,n+20/3,20/3,0,2*Math.PI,!1),e.fillStyle=o,e.fill()}},{key:"drawArena",value:function(){this.ctx.beginPath(),this.ctx.arc(d.x,d.y,v,0,2*Math.PI,!1),this.ctx.lineWidth=8;var t=this.ctx.createRadialGradient(d.x,d.y,v,d.x,d.y,v+50);t.addColorStop(0,"black"),t.addColorStop(.2,"white"),this.ctx.strokeStyle=t,this.ctx.stroke()}},{key:"updatePositions",value:function(){for(var t=this.positions,e=this.behaviours,i=[],a=0;a<t.length;a++)if(e[a]){var n=t[a],s=t[e[a][0]],o=e[a][1],h=this.findNewPosition(n,s,o),u=Object(r.a)(h,2),l=u[0],c=u[1];i[a]=l,this.updateHasMovedLastUpdate(a,c),this.updateBehaviour(a,c)}this.positions=i}},{key:"updateHasMovedLastUpdate",value:function(t,e){this.hasMovedLastUpdate[t]!==e&&(this.movementChangeTimestamps[t]=this.loopTimestamp,this.hasMovedLastUpdate[t]=e)}},{key:"updateBehaviour",value:function(t,e){if(!this.getSearchParameter("no-updates")){var i=this.loopTimestamp-this.movementChangeTimestamps[t],a=1250,n=(Math.exp(i/a)-Math.exp(1/a))/(Math.exp(8)-Math.exp(1/a));Math.random()>n||this.getSearchParameter("update-only-stationary")&&e||(this.behaviours[t][1]=this.getRandomBehaviourRule())}}},{key:"findNewPosition",value:function(t,e,i){var a=this.findDirectionMultiplier(t,e,i);if(0===a)return[t,!1];var n=e.subtract(t).multiply(a);return[t.moveUniform(n),!0]}},{key:"findDirectionMultiplier",value:function(t,e,i){var a=t.distance(e),n=Math.sign(i);return n>0&&(i=2*v-i),n*a>i?n:0}}]),t}();var y=function(){return n.a.createElement("div",{className:"wrapper"},n.a.createElement("canvas",{width:750,height:750,ref:function(t){return new p(t)}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[20,1,2]]]);
//# sourceMappingURL=main.1deaf7af.chunk.js.map